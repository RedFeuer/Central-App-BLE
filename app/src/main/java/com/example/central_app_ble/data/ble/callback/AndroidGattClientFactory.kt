package com.example.central_app_ble.data.ble.callback

import com.example.central_app_ble.data.ble.AndroidGattClient
import dagger.assisted.Assisted
import dagger.assisted.AssistedFactory

/* обычно при DI передаем объекты, которые известны в compile-time
* в данном случае строка становится известной только в run-time,
* поэтому нужна фабрика для инъекции в конструктор через DI */
/**
 * Фабрика для создания [AndroidGattClient] с параметром, известным только во время работы.
 *
 * Зачем нужна:
 * - при внедрении зависимостей обычно все параметры конструктора известны заранее (CompileTime);
 * - адрес устройства появляется только во время работы (после сканирования/выбора - в RunTime);
 * - поэтому клиент GATT нельзя просто “внедрить готовым”, его нужно создавать по требованию,
 *   передавая адрес в момент подключения.
 *
 * Как используется:
 * - репозиторий (или другой компонент) вызывает [create], передавая адрес устройства;
 * - контейнер внедрения зависимостей сам подставляет все остальные зависимости [AndroidGattClient],
 *   а параметр адреса берёт из аргумента вызова.
 *
 * Примечание:
 * - [@Assisted] помечает параметр как “передаваемый вручную” при создании объекта;
 * - строковый ключ "address" используется, чтобы явно связать параметр фабрики с параметром конструктора
 */
@AssistedFactory
interface AndroidGattClientFactory {
    fun create(@Assisted("address") address: String): AndroidGattClient
}